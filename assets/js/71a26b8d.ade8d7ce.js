"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5370],{26864:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>m});const o=JSON.parse('{"id":"custom_commands","title":"Custom Commands","description":"Kohl\'s Admin is currently in development. Everything in these docs is subject to change.","source":"@site/docs/custom_commands.mdx","sourceDirName":".","slug":"/custom_commands","permalink":"/docs/custom_commands","draft":false,"unlisted":false,"editUrl":"https://github.com/kohls-admin/kohls-admin/edit/master/docs/custom_commands.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"defaultSidebar","previous":{"title":"Using UIs","permalink":"/docs/getting-started/using_uis"},"next":{"title":"Troubleshoot","permalink":"/docs/troubleshooting"}}');var s=e(74848),i=e(28453);const r={sidebar_position:3},a="Custom Commands",d={},m=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Addon Setup",id:"addon-setup",level:2},{value:"Creating a Custom Command",id:"creating-a-custom-command",level:2}];function l(t){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...t.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"custom-commands",children:"Custom Commands"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"Kohl's Admin is currently in development. Everything in these docs is subject to change."})}),"\n",(0,s.jsx)(n.p,{children:"Custom commands are a powerful feature that lets you personalize Kohl's Admin, automate tasks, streamline your workflows, and create unique interactions within your experience."}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Make sure you have Kohl's Admin:"})," Ensure that Kohl's Admin is ",(0,s.jsx)(n.a,{href:"/docs/intro",children:"present in your experience"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Addons Folder"}),": Confirm that Kohl's Admin has a folder named ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"Addons"})}),". This is where you'll place your custom command scripts."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"addon-setup",children:"Addon Setup"}),"\n",(0,s.jsxs)(n.p,{children:["All custom commands are part of an ",(0,s.jsx)(n.a,{href:"/docs/addons",children:"Addon"}),". For this section we will create addons that only create custom commands, but in later parts we will show the extent of what addons can do."]}),"\n",(0,s.jsxs)(n.p,{children:["All addons are a ",(0,s.jsx)(n.a,{href:"https://create.roblox.com/docs/reference/engine/classes/ModuleScript",children:"ModuleScript"})," that returns a function. To start, create a module script and inside of it write the following:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"return function(_K)\n    -- Addon code goes here!\nend\n"})}),"\n",(0,s.jsx)(n.p,{children:'Inside of this function is where we will be adding our custom commands.\nThe name of the addon can be anything, but for this example we encourage "customCommands".'}),"\n",(0,s.jsx)(n.admonition,{type:"danger",children:(0,s.jsxs)(n.p,{children:["Adding ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"Client"})})," or ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"Server"})})," an Addon file's name will make it only run in that context. This will make the other context unaware of the command!"]})}),"\n",(0,s.jsx)(n.h2,{id:"creating-a-custom-command",children:"Creating a Custom Command"}),"\n",(0,s.jsxs)(n.p,{children:["To create a custom command, you must register it with the ",(0,s.jsx)(n.a,{href:"/api/Registry",children:"Registry"}),", using ",(0,s.jsx)(n.a,{href:"/api/Registry#registerCommand",children:"registerCommand()"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Using this, our module becomes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"return function(_K)\n\t_K.Registry.registerCommand(_K, commandDefinition)\nend\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"commandDefinition"})," is a placeholder for the real contents of our command! Commands require a lot of information, structured in a ",(0,s.jsx)(n.a,{href:"/api/Registry#CommandDefinition",children:"commandDefinition"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"type commandDefinition {\n\tname: string,                       -- Name of the command.\n\taliases: { string }?,               -- Table of aliases.\n\tdescription: string,                -- Description of what the command does.\n\tgroup: string,                      -- What group the command belongs to.\n\tnoLog: boolean?,                    -- If the command should be hidden from logs.\n\targs: { ArgumentDefinition }?,      -- A table of argument definitions.\n\tpermissions: { [string]: boolean }? -- A table of role permissions required to run the command.\n\tenvClient: {} | () -> {}?,          -- Sets up an environment for the command.\n\tenv: {} | () -> {}?,                -- Sets up an environment for the command.\n\trunClient: (...any) -> ()?,         -- What runs on the client of the player that ran the command.\n\trun: (...any) -> ()?                -- What the command runs on the server.\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["To give an example, this is the code from the ",(0,s.jsx)(n.code,{children:"ExampleAddon"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'-- addons not containing in "Client" or "Server" will run in both contexts (shared)\nreturn function(_K)\n\t-- _K.log(`Hello World from ExampleAddon!`, "INFO")\n\n\t_K.Registry.registerCommand(_K, {\n\t\tname = "customcommand",\n\t\taliases = { "customcommandalias", "customcommandalias2" },\n\t\tdescription = "Custom command description.",\n\n\t\t-- The command group to sort the command by, this is what roles use to easily assign groups of commands.\n\t\t-- Default groups in order of abusability are "Utility", "Environment", "General", "Fun", "Moderation", "Administration", and "Creator"\n\t\tgroup = "General", -- Command group to use.\n\t\tnoLog = false, -- If the command is not logged when used.\n\n\t\t--[[ Argument definitions\n\n\t\tDefault Argument Types\n\t\t\t"boolean" "booleans"\n\t\t\t"integer" "integers"\n\t\t\t"number" "numbers"\n\t\t\t"string" "strings"        - normal strings are filtered by default!\n\t\t\t"rawString", "rawStrings" - use rawStrings for commands that require an unfiltered input\n\n\t\t\t"ban" "bans"\n\t\t\t"color"\n\t\t\t"command"\n\t\t\t"member" "members"\n\t\t\t"player" "players"\n\t\t\t"userId" "userIds"\n\t\t\t"role" "roles"\n\t\t\t"team" "teams"\n\t\t\t"timeSimple"\n\t\t\t"tool" "tools"\n\n\t\tRoblox Enum Types: Use any Roblox Enum as a type, for example:\n\t\t\t"Enum.Font" for a single Font enum\n\t\t\t"Enum.Fonts" for a list of Font enums\n\n\t\tCreating Custom Types:\n\t\t\tCheck Kohl\'s Admin > MainModule > DefaultTypes for examples\n\n\t\t]]\n\t\targs = {\n\t\t\t{\n\t\t\t\ttype = "string",\n\t\t\t\tname = "Message",\n\t\t\t\tdescription = "The message to send.", -- Description shown in command list.\n\t\t\t\t-- If the command is optional, make sure to check if it\'s nil and not false!\n\t\t\t\toptional = true,\n\n\t\t\t\t-- Argument role permission restrictions\n\t\t\t\tpermissions = {},\n\n\t\t\t\t-- player type options\n\t\t\t\tlowerRank = false, -- Only allows selecting players of a lower rank\n\t\t\t\tignoreSelf = false, -- Ignores self\n\t\t\t\tshouldRequest = false, -- If the command should be requested on same rank or higher\n\t\t\t},\n\t\t},\n\t\t-- Command permission restrictions\n\t\tpermissions = {},\n\n\t\t-- Command environment\n\n\t\tenv = function(_K)\n\t\t\t-- This will only run once on each server while in studio or in the demo place\n\t\t\tif _K.DEBUG or _K.IsStudio then\n\t\t\t\t_K.log(`Hello World from ExampleAddon customcommand env!`, "INFO")\n\t\t\tend\n\n\t\t\t-- This table is passed to the `run` function as `context.env`\n\t\t\treturn {\n\t\t\t\tcountServer = 0,\n\t\t\t}\n\t\tend,\n\n\t\tenvClient = function(_K)\n\t\t\t-- This will only run once on each client while in studio or in the demo place\n\t\t\tif _K.DEBUG or _K.IsStudio then\n\t\t\t\t_K.log(`Hello World from ExampleAddon customcommand envClient!`, "INFO")\n\t\t\tend\n\n\t\t\t-- This table is passed to the `runClient` function as `context.env`\n\t\t\treturn {\n\t\t\t\tcountClient = 0,\n\t\t\t}\n\t\tend,\n\n\t\t--[[ Command execution\n\n\t\tCommand context fields:\n\t\t\t_K         - reference to _K toplevel API\n\t\t\talias      - alias used for this command\n\t\t\tarray      - raw command string array result\n\t\t\tdefinition - reference to the command definition used in registerCommand\n\t\t\tenv        - command environment\n\t\t\tfrom       - userId of the command caller\n\t\t\tfromPlayer - Player Instance of the command caller\n\t\t\tfromRank   - rank of the command caller\n\t\t\ttext       - full command text\n\t\t\tundo       - if the alias starts with "un"\n\n\t\t]]\n\n\t\t-- Function that runs on the server when the command is called\n\t\trun = function(context, message: string?)\n\t\t\t-- Create a simple Roblox message object\n\t\t\tlocal messageInstance = Instance.new("Message", workspace)\n\n\t\t\t-- Since our message is optional we need to check nil for a default value\n\t\t\tmessageInstance.Text = if message == nil then "Default message" else message\n\n\t\t\t-- Destroy the message after 5 seconds\n\t\t\ttask.delay(5, messageInstance.Destroy, messageInstance)\n\n\t\t\t-- Number of times the command has been used on this server\n\t\t\tcontext.env.countServer += 1\n\n\t\t\tprint("Custom command ran on server!", message, context.env.countServer)\n\t\tend,\n\n\t\t-- Function that runs on the player\'s client when the command is called\n\t\trunClient = function(context, message)\n\t\t\t-- Number of times the command has been used on this client\n\t\t\tcontext.env.countClient += 1\n\t\t\tprint("Custom command ran on the client!", message, context.env.countClient)\n\t\tend,\n\t})\n\nend\n'})}),"\n",(0,s.jsxs)(n.p,{children:["This command creates a ",(0,s.jsx)(n.code,{children:"Message"})," instance and populates it with the player provided message. As you can see, the command is registered with a dictionary that lists all information about the command."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"You can put multiple custom commands in one addon! All you need to do is register multiple commands in the same module."})}),"\n",(0,s.jsx)(n.p,{children:"In later sections, we'll cover more advanced uses of custom commands, including environments and other advanced functionality."})]})}function c(t={}){const{wrapper:n}={...(0,i.R)(),...t.components};return n?(0,s.jsx)(n,{...t,children:(0,s.jsx)(l,{...t})}):l(t)}},28453:(t,n,e)=>{e.d(n,{R:()=>r,x:()=>a});var o=e(96540);const s={},i=o.createContext(s);function r(t){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof t?t(n):{...n,...t}}),[n,t])}function a(t){let n;return n=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:r(t.components),o.createElement(i.Provider,{value:n},t.children)}}}]);